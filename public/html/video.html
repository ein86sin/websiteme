<!DOCTYPE html>
<html lang="fa">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/public/css/css.css">
    <link rel="stylesheet" href="../css/manegment.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ویدیوها</title>
</head>
<body dir="rtl">
    <!-- <div id="navbar-placeholder"></div> -->

    <div class="groups">
        <div class="card" data-section="aftereffect">
            <h3>Aftereffect</h3>
            <div class="card-img"></div>
        </div>
        <div class="card" data-section="premiere">
            <h3>Premiere</h3>
            <div class="card-img"></div>
        </div>
        <div class="card" data-section="inshot">
            <h3>Inshot</h3>
            <div class="card-img"></div>
        </div>
        <div class="card" data-section="alightmotion">
            <h3>Alightmotion</h3>
            <div class="card-img"></div>
        </div>
    </div>

    <script src="/js/load-navbar.js"></script>
    <!-- <script src="/js/load-videos.js"></script> -->
     <script>
        document.addEventListener("DOMContentLoaded", async () => {
    document.querySelectorAll(".card").forEach(async card => {
        const section = card.dataset.section;
        const container = card.querySelector(".card-img");

        // ✅ اصلاح: آدرس نسبی
        const res = await fetch(`/api/items/${section}`);
        const items = await res.json();

        items.forEach(savedItem => {
            const item = document.createElement("div");
            item.classList.add("uploaded-item");

            const vid = document.createElement("video");
            vid.src = savedItem.fileUrl;
            vid.controls = true;
            item.appendChild(vid);

            container.appendChild(item);
        });
    });
});
     </script>
</body>
</html>
